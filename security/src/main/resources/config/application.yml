spring:
  application:
    name: security
  profiles:
    active: ${PROFILES_ACTIVE:dev}
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://${mysql.ip}:${mysql.port}/${mysql.database}?useUnicode=true&characterEncoding=utf-8&useSSL=false
    username: ${mysql.user}
    password: ${mysql.pwd}
  main:
    banner-mode: log
  lifecycle:
    timeout-per-shutdown-phase: 30s #缓冲期
  flyway: #flyway相关配置
    locations: classpath:db/migration/mysql/${spring.profiles.active}
    check-location: true
    enabled: true #是否启用
    encoding: UTF-8 #编码
    sql-migration-prefix: V #脚本前缀，默认V大写
    sql-migration-separator: __ #脚本分割符
    sql-migration-suffixes: .sql #脚本后缀
    #baseline-version: 1 #基线默认版本
    validate-on-migrate: true #迁移时是否校验默认true
    baseline-on-migrate: false #存量数据初始化flyway基线,本地基线设置完,最好重新设置false,当迁移发现数据库非空且存在没有元数据的表时，自动执行基准迁移，新建schema_version表，当数据库已经有表，需要设置为true，并且脚本版本号要大于1

mybatis:
  mapper-locations: classpath:mybatis/**/*Mapper.xml

server:
  port: ${port}
  shutdown: graceful #优雅停机,当web容器关闭时，web服务器将不再接收新请求，并将等待活动请求完成,等待时间timeout-per-shutdown-phase
#  shutdown: immediate #立即关机
  compression:
    enabled: true
  tomcat:
    basedir: ${TOMCAT_LOG:logs/tomcat}
    accesslog:
      enabled: true

logging:
  level:
    root: INFO
  file:
#    name: logs/${spring.application.name}.log
    path: ./logs  #path和name两个写一个就可以，使用path，默认日志名spring.log
  config: classpath:config/log/logback.xml
  logback:
    rollingpolicy:
      max-file-size: 10MB
      max-history: 180
      total-size-cap: 2GB
      clean-history-on-start: true


info:
  app:
    name: 认证鉴权
    shortName: security
    version: 0.0.1
    encoding: UTF-8
    java.source: 1.8
    java.traget: 1.8